# ğŸ—ï¸ Architecture ComplÃ¨te du SystÃ¨me

## ğŸ“Š Vue d'ensemble Globale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SOURCES DE DONNÃ‰ES                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚     ksqlDB       â”‚                    â”‚   Kafka Topics   â”‚              â”‚
â”‚  â”‚                  â”‚                    â”‚                  â”‚              â”‚
â”‚  â”‚ â€¢ Streams (4)    â”‚                    â”‚ â€¢ Streams (4)    â”‚              â”‚
â”‚  â”‚ â€¢ Tables (4)     â”‚                    â”‚ â€¢ Tables (4)     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                                       â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                       â”‚
            â”‚                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚         COUCHE D'INGESTION            â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚                                       â”‚                         â”‚
â”‚           â–¼                                       â–¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MODE BATCH      â”‚                    â”‚  MODE STREAMING  â”‚             â”‚
â”‚  â”‚                  â”‚                    â”‚                  â”‚             â”‚
â”‚  â”‚ export_to_       â”‚                    â”‚ kafka_consumer_  â”‚             â”‚
â”‚  â”‚ data_lake.py     â”‚                    â”‚ orchestrator.py  â”‚             â”‚
â”‚  â”‚                  â”‚                    â”‚                  â”‚             â”‚
â”‚  â”‚ sync_to_         â”‚                    â”‚ â”œâ”€ consumer_     â”‚             â”‚
â”‚  â”‚ mysql.py         â”‚                    â”‚ â”‚  datalake.py   â”‚             â”‚
â”‚  â”‚                  â”‚                    â”‚ â””â”€ consumer_     â”‚             â”‚
â”‚  â”‚ â€¢ Manuel/Cron    â”‚                    â”‚    warehouse.py  â”‚             â”‚
â”‚  â”‚ â€¢ Latence: min   â”‚                    â”‚                  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â€¢ Automatique    â”‚             â”‚
â”‚           â”‚                              â”‚ â€¢ Latence: sec   â”‚             â”‚
â”‚           â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                                       â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â”‚    COUCHE DE STOCKAGE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚                                                â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚        â”‚                                     â”‚                            â”‚
â”‚        â–¼                                     â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   DATA LAKE      â”‚              â”‚  DATA WAREHOUSE  â”‚                  â”‚
â”‚  â”‚   (Parquet)      â”‚              â”‚     (MySQL)      â”‚                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚ STREAMS/         â”‚              â”‚ DIMENSIONS       â”‚                  â”‚
â”‚  â”‚ â”œâ”€ transaction_  â”‚              â”‚ â”œâ”€ dim_users     â”‚                  â”‚
â”‚  â”‚ â”‚  stream/       â”‚              â”‚ â””â”€ dim_payment_  â”‚                  â”‚
â”‚  â”‚ â”‚  year=2025/    â”‚              â”‚    methods       â”‚                  â”‚
â”‚  â”‚ â”‚  month=01/     â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚ â”‚  day=28/       â”‚              â”‚ FAITS            â”‚                  â”‚
â”‚  â”‚ â”‚  *.parquet     â”‚              â”‚ â”œâ”€ fact_user_    â”‚                  â”‚
â”‚  â”‚ â”‚                â”‚              â”‚ â”‚  transaction_  â”‚                  â”‚
â”‚  â”‚ â”œâ”€ transaction_  â”‚              â”‚ â”‚  summary       â”‚                  â”‚
â”‚  â”‚ â”‚  flattened/    â”‚              â”‚ â”œâ”€ fact_user_    â”‚                  â”‚
â”‚  â”‚ â”‚                â”‚              â”‚ â”‚  transaction_  â”‚                  â”‚
â”‚  â”‚ â”œâ”€ transaction_  â”‚              â”‚ â”‚  summary_eur   â”‚                  â”‚
â”‚  â”‚ â”‚  stream_       â”‚              â”‚ â”œâ”€ fact_payment_ â”‚                  â”‚
â”‚  â”‚ â”‚  anonymized/   â”‚              â”‚ â”‚  method_totals â”‚                  â”‚
â”‚  â”‚ â”‚                â”‚              â”‚ â””â”€ fact_product_ â”‚                  â”‚
â”‚  â”‚ â””â”€ transaction_  â”‚              â”‚    purchase_     â”‚                  â”‚
â”‚  â”‚    stream_       â”‚              â”‚    counts        â”‚                  â”‚
â”‚  â”‚    blacklisted/  â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚                  â”‚              â”‚ RELATIONS        â”‚                  â”‚
â”‚  â”‚ TABLES/          â”‚              â”‚ â€¢ 3 FK CASCADE   â”‚                  â”‚
â”‚  â”‚ â”œâ”€ user_         â”‚              â”‚ â€¢ IntÃ©gritÃ©      â”‚                  â”‚
â”‚  â”‚ â”‚  transaction_  â”‚              â”‚   rÃ©fÃ©rentielle  â”‚                  â”‚
â”‚  â”‚ â”‚  summary/      â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚ â”‚  version=v1/   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚ â”‚  version=v2/   â”‚                                                    â”‚
â”‚  â”‚ â”‚  *.parquet     â”‚                                                    â”‚
â”‚  â”‚ â”‚                â”‚                                                    â”‚
â”‚  â”‚ â”œâ”€ user_         â”‚                                                    â”‚
â”‚  â”‚ â”‚  transaction_  â”‚                                                    â”‚
â”‚  â”‚ â”‚  summary_eur/  â”‚                                                    â”‚
â”‚  â”‚ â”‚                â”‚                                                    â”‚
â”‚  â”‚ â”œâ”€ payment_      â”‚                                                    â”‚
â”‚  â”‚ â”‚  method_       â”‚                                                    â”‚
â”‚  â”‚ â”‚  totals/       â”‚                                                    â”‚
â”‚  â”‚ â”‚                â”‚                                                    â”‚
â”‚  â”‚ â””â”€ product_      â”‚                                                    â”‚
â”‚  â”‚    purchase_     â”‚                                                    â”‚
â”‚  â”‚    counts/       â”‚                                                    â”‚
â”‚  â”‚                  â”‚                                                    â”‚
â”‚  â”‚ FORMAT           â”‚                                                    â”‚
â”‚  â”‚ â€¢ Parquet        â”‚                                                    â”‚
â”‚  â”‚ â€¢ Snappy         â”‚                                                    â”‚
â”‚  â”‚ â€¢ Compression    â”‚                                                    â”‚
â”‚  â”‚   70-90%         â”‚                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â”‚    COUCHE D'ANALYSE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚                                                â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚        â”‚                                     â”‚                            â”‚
â”‚        â–¼                                     â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  ANALYSE         â”‚              â”‚  ANALYSE         â”‚                  â”‚
â”‚  â”‚  DATA LAKE       â”‚              â”‚  DATA WAREHOUSE  â”‚                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚ â€¢ Pandas         â”‚              â”‚ â€¢ SQL Queries    â”‚                  â”‚
â”‚  â”‚ â€¢ DuckDB         â”‚              â”‚ â€¢ Joins          â”‚                  â”‚
â”‚  â”‚ â€¢ PyArrow        â”‚              â”‚ â€¢ AgrÃ©gations    â”‚                  â”‚
â”‚  â”‚ â€¢ Spark          â”‚              â”‚ â€¢ BI Tools       â”‚                  â”‚
â”‚  â”‚                  â”‚              â”‚   - Tableau      â”‚                  â”‚
â”‚  â”‚ USE CASES        â”‚              â”‚   - Power BI     â”‚                  â”‚
â”‚  â”‚ â€¢ Big Data       â”‚              â”‚   - Metabase     â”‚                  â”‚
â”‚  â”‚ â€¢ ML/AI          â”‚              â”‚                  â”‚                  â”‚
â”‚  â”‚ â€¢ Archives       â”‚              â”‚ USE CASES        â”‚                  â”‚
â”‚  â”‚ â€¢ Time Series    â”‚              â”‚ â€¢ Dashboards     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â€¢ Rapports       â”‚                  â”‚
â”‚                                    â”‚ â€¢ Alertes        â”‚                  â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux de DonnÃ©es DÃ©taillÃ©

### Mode Batch (ksqlDB)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ksqlDB  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ HTTP API
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KsqlDBClient        â”‚
â”‚ â€¢ execute_query()   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ DataFrame
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DataLakeExporter    â”‚
â”‚ â€¢ Partitionnement   â”‚
â”‚ â€¢ Conversion Parquetâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                  â”‚
     â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parquet  â”‚    â”‚ MySQL        â”‚
â”‚ Files    â”‚    â”‚ Tables       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode Streaming (Kafka)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kafka Topic â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Consumer Poll
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KafkaConsumer        â”‚
â”‚ â€¢ Batch 1000 msg     â”‚
â”‚ â€¢ Timeout 30s        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Buffer
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Batch Processor      â”‚
â”‚ â€¢ Accumulation       â”‚
â”‚ â€¢ Flush              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parquet  â”‚      â”‚ MySQL        â”‚
â”‚ Writer   â”‚      â”‚ Inserter     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š SchÃ©ma Relationnel MySQL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   dim_users          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK user_id           â”‚
â”‚    user_name         â”‚
â”‚    user_email        â”‚
â”‚    user_country      â”‚
â”‚    user_city         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ N
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                             â”‚
           â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fact_user_transaction_   â”‚    â”‚ fact_user_transaction_   â”‚
â”‚ summary                  â”‚    â”‚ summary_eur              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK summary_id            â”‚    â”‚ PK summary_eur_id        â”‚
â”‚ FK user_id               â”‚    â”‚ FK user_id               â”‚
â”‚    transaction_type      â”‚    â”‚    transaction_type      â”‚
â”‚    total_amount          â”‚    â”‚    total_amount_eur      â”‚
â”‚    transaction_count     â”‚    â”‚    transaction_count     â”‚
â”‚    avg_amount            â”‚    â”‚    avg_amount_eur        â”‚
â”‚    snapshot_date         â”‚    â”‚    exchange_rate         â”‚
â”‚    snapshot_version      â”‚    â”‚    snapshot_date         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    snapshot_version      â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dim_payment_methods  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK payment_method_id â”‚
â”‚    payment_method_   â”‚
â”‚    name              â”‚
â”‚    payment_method_   â”‚
â”‚    category          â”‚
â”‚    is_active         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ N
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fact_payment_method_     â”‚
â”‚ totals                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK payment_total_id      â”‚
â”‚ FK payment_method_id     â”‚
â”‚    payment_method_name   â”‚
â”‚    total_amount          â”‚
â”‚    transaction_count     â”‚
â”‚    avg_amount            â”‚
â”‚    snapshot_date         â”‚
â”‚    snapshot_version      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fact_product_purchase_   â”‚
â”‚ counts                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK product_count_id      â”‚
â”‚    product_id            â”‚
â”‚    product_name          â”‚
â”‚    product_category      â”‚
â”‚    purchase_count        â”‚
â”‚    total_revenue         â”‚
â”‚    avg_price             â”‚
â”‚    unique_buyers         â”‚
â”‚    snapshot_date         â”‚
â”‚    snapshot_version      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(IndÃ©pendante)
```

---

## ğŸ”§ Composants du SystÃ¨me

### Scripts Python (10 fichiers)

```
data_lake/
â”œâ”€â”€ data_lake_config.py          (~180 lignes)
â”œâ”€â”€ export_to_data_lake.py       (~400 lignes)
â”œâ”€â”€ manage_feeds.py              (~450 lignes)
â”œâ”€â”€ metadata_utils.py            (~300 lignes)
â”œâ”€â”€ test_setup.py                (~250 lignes)
â”œâ”€â”€ sync_to_mysql.py             (~380 lignes)
â”œâ”€â”€ kafka_config.py              (~170 lignes)
â”œâ”€â”€ kafka_consumer_datalake.py   (~280 lignes)
â”œâ”€â”€ kafka_consumer_warehouse.py  (~380 lignes)
â””â”€â”€ kafka_consumer_orchestrator.py (~180 lignes)

Total: ~2970 lignes
```

### Scripts SQL (4 fichiers)

```
sql/
â”œâ”€â”€ 01_create_database.sql
â”œâ”€â”€ 02_create_dimension_tables.sql
â”œâ”€â”€ 03_create_fact_tables.sql
â””â”€â”€ 04_sample_queries.sql
```

### Documentation (18 fichiers)

```
docs/
â”œâ”€â”€ README.md
â”œâ”€â”€ README_FINAL.md
â”œâ”€â”€ QUICK_START.md
â”œâ”€â”€ SUMMARY.md
â”œâ”€â”€ DESIGN_DOCUMENT.md
â”œâ”€â”€ ARCHITECTURE.md
â”œâ”€â”€ ARCHITECTURE_COMPLETE.md
â”œâ”€â”€ DATA_FLOW.md
â”œâ”€â”€ DECISION_GUIDE.md
â”œâ”€â”€ INDEX.md
â”œâ”€â”€ PROJECT_COMPLETION.md
â”œâ”€â”€ PROJECT_FINAL_SUMMARY.md
â”œâ”€â”€ COMPLETE_PROJECT_SUMMARY.md
â”œâ”€â”€ DATA_WAREHOUSE_DESIGN.md
â”œâ”€â”€ DATA_WAREHOUSE_QUICKSTART.md
â”œâ”€â”€ DATA_WAREHOUSE_SUMMARY.md
â”œâ”€â”€ KAFKA_CONSUMERS_GUIDE.md
â””â”€â”€ KAFKA_CONSUMERS_SUMMARY.md

Total: ~200 KB
```

---

## ğŸ“ˆ MÃ©triques de Performance

### Data Lake (Parquet)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPRESSION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ JSON:    100 MB                     â”‚
â”‚ Parquet:  15 MB  (85% rÃ©duction)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CSV:     10 sec                     â”‚
â”‚ Parquet: 0.1 sec  (100x plus rapide)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Warehouse (MySQL)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REQUÃŠTES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Simple SELECT:    < 10ms            â”‚
â”‚ JOIN 2 tables:    < 50ms            â”‚
â”‚ AgrÃ©gation:       < 100ms           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kafka Consumers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ THROUGHPUT                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Messages/sec:  1000-5000            â”‚
â”‚ Latence:       < 100ms              â”‚
â”‚ Batch size:    1000 messages        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Cas d'Usage

### 1. Dashboards Temps RÃ©el

```
Kafka â†’ Consumers â†’ MySQL â†’ BI Tool
(Latence: secondes)
```

### 2. Analyses Big Data

```
Kafka â†’ Consumer â†’ Parquet â†’ Pandas/Spark
(Volume: TB de donnÃ©es)
```

### 3. Rapports Mensuels

```
ksqlDB â†’ Export Batch â†’ Parquet/MySQL â†’ Rapport
(ContrÃ´le: manuel)
```

### 4. Machine Learning

```
Parquet â†’ Feature Engineering â†’ ML Model
(Performance: lecture optimisÃ©e)
```

---

## âœ… Checklist de Production

### Infrastructure
- [ ] MySQL installÃ© et sÃ©curisÃ©
- [ ] Kafka cluster configurÃ©
- [ ] Environnement Python configurÃ©
- [ ] Monitoring en place

### Configuration
- [ ] ksqlDB configurÃ©
- [ ] Kafka topics crÃ©Ã©s
- [ ] MySQL users et permissions
- [ ] Logs configurÃ©s

### Tests
- [ ] Tests unitaires passÃ©s
- [ ] Tests d'intÃ©gration passÃ©s
- [ ] Tests de charge effectuÃ©s
- [ ] Backup testÃ©

### Documentation
- [ ] Documentation Ã  jour
- [ ] Runbooks crÃ©Ã©s
- [ ] Alertes configurÃ©es
- [ ] Ã‰quipe formÃ©e

---

**Version**: 2.0  
**Date**: Janvier 2025  
**Statut**: âœ… **PRODUCTION READY**
